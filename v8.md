
![](https://github.com/doozi316/markdown-repository/blob/master/uploads/v8.png?raw=true)

## ğŸ“£ ë“¤ì–´ê°€ë©°

ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„  ìë°”ìŠ¤í¬ë¦½íŠ¸ ë™ì‘ ê³¼ì • ë° ì‹¤í–‰ í™˜ê²½ êµ¬ì¡°ì— ëŒ€í•´ ì•Œì•„ë³¸ë‹¤.
v8, ì½œ ìŠ¤íƒ, í™, ì½œë°± í, ì´ë²¤íŠ¸ ë£¨í”„ ë“± ìë°”ìŠ¤í¬ë¦½íŠ¸ ì£¼ìš” ê°œë…ì— ëŒ€í•´ ë‹¤ë£¬ë‹¤.

## ğŸ’› ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ì–´ë–»ê²Œ ì‹¤í–‰ë˜ëŠ”ê°€?

ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œëŠ” **ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„** ì— ì˜í•´ ì‹¤í–‰ëœë‹¤.
ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì€ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰ì‹œí‚¤ëŠ” í”„ë¡œê·¸ë¨ì´ë‹¤.
ëŒ€í‘œì ì¸ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ìœ¼ë¡œëŠ” **V8 ì—”ì§„** ì´ ìˆë‹¤.

## ğŸ’› V8 ì—”ì§„ì´ë€?

V8 ì—”ì§„ì€ êµ¬ê¸€ì—ì„œ ê°œë°œí•œ ì˜¤í”ˆì†ŒìŠ¤ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì´ë‹¤.
ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œë¥¼ ê¸°ê³„ì–´ë¡œ ë³€í™˜í•˜ì—¬ ì»´í“¨í„°ê°€ ì´í•´í•˜ê³  ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ì—­í• ì„ í•œë‹¤.
C++ ë¡œ êµ¬í˜„ë˜ì–´ ìˆë‹¤.
V8 ì—”ì§„ì€ ëŒ€ë¶€ë¶„ì˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ <u>í˜¸ìŠ¤íŠ¸ í™˜ê²½</u>ì— ë‚´ì¥ë˜ì–´ ìˆë‹¤.

ìë°”ìŠ¤í¬ë¦½íŠ¸ í˜¸ìŠ¤íŠ¸ í™˜ê²½ì´ë€,
ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ ì˜ë¯¸í•œë‹¤.
ëŒ€í‘œì ì¸ ìë°”ìŠ¤í¬ë¦½íŠ¸ í˜¸ìŠ¤íŠ¸ í™˜ê²½ì—”
êµ¬ê¸€ í¬ë¡¬, Node.js, React native(ëª¨ë°”ì¼ ì•±), Electron(ë°ìŠ¤í¬íƒ‘)ì´ ìˆë‹¤.

## ğŸ’› V8 ì—”ì§„ êµ¬ì¡°

![V8 ì—”ì§„ ë‚´ë¶€ êµ¬ì¡°](https://github.com/doozi316/markdown-repository/blob/master/uploads/v8engine.jpeg?raw=true)

V8ì€ í¬ê²Œ ë‘ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.
í™ ì˜ì—­ê³¼, ì½œ ìŠ¤íƒ ì˜ì—­ì´ë‹¤.

### í™(Heap) ì˜ì—­

í™ì€ ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ê°ì²´, ë°°ì—´, í•¨ìˆ˜ ë“±ê³¼ ê°™ì€ ë°ì´í„°ê°€ ì €ì¥ë˜ëŠ” ë©”ëª¨ë¦¬ ì˜ì—­ì´ë‹¤.
ì—¬ê¸°ì„œ ë©”ëª¨ë¦¬ëŠ” ìš°ë¦¬ê°€ ì•Œê³  ìˆëŠ” ì»´í“¨í„°ì˜ ë©”ëª¨ë¦¬(RAM)ê°€ ë§ë‹¤.
V8 ì—”ì§„ì€ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ì»´í“¨í„°ì˜ ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•œë‹¤.

í™ì€ êµ¬ì¡°í™”ë˜ì§€ ì•Šì€ ë©”ëª¨ë¦¬ ì˜ì—­ì´ë‹¤.
êµ¬ì¡°í™”ë˜ì§€ ì•Šì•˜ë‹¤ëŠ” ê±´ íŠ¹ì •í•œ ìˆœì„œë‚˜ ì •ë ¬ ì—†ì´ ë°ì´í„°ë¥¼ ì €ì¥í•œë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.
ìŠ¤íƒì´ë‚˜ í ê°™ì€ êµ¬ì¡°ê°€ ë”±íˆ ì—†ë‹¤ëŠ” ê²ƒ.

í™ì˜ ë©”ëª¨ë¦¬ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œê°€ ì‹¤í–‰ë  ë•Œ ë™ì ìœ¼ë¡œ í• ë‹¹ëœë‹¤.
ê°ì²´ë‚˜ ë³€ìˆ˜ ë”°ìœ„ì˜ í¬ê¸°ë¥¼ ëŸ°íƒ€ì„ë•Œ íŒë‹¨í•˜ê³  í•´ë‹¹ í¬ê¸°ë§Œí¼ ë©”ëª¨ë¦¬ê°€ ë™ì  í• ë‹¹ëœë‹¤.

í™ ë©”ëª¨ë¦¬ì— ì €ì¥ë˜ì–´ ìˆëŠ” ë°ì´í„°ë¥¼ ë” ì´ìƒ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´,
V8ì— ë‚´ì¥ë˜ì–´ ìˆëŠ” ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì´ í™ì— ìˆëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë°ì´í„°ë¥¼ ì°¾ì•„ ë©”ëª¨ë¦¬ë¥¼ í•´ì œí•œë‹¤.

### ì½œ ìŠ¤íƒ(Call Stack) ì˜ì—­

ì½œ ìŠ¤íƒì€ í•¨ìˆ˜ì˜ í˜¸ì¶œì„ ê´€ë¦¬í•˜ëŠ” ì˜ì—­ì´ë‹¤.
ìŠ¤íƒ êµ¬ì¡°ë¡œ ë˜ì–´ ìˆë‹¤.

![ìŠ¤íƒ êµ¬ì¡°](https://github.com/doozi316/markdown-repository/blob/master/uploads/stack.jpeg?raw=true)

ì „ê³µìë¼ë©´ ìŠ¤íƒ ìë£Œ êµ¬ì¡°ì— ëŒ€í•´ ë“¤ì–´ë´¤ì„ ê²ƒì´ë‹¤.
LIFO (Last In, First Out) êµ¬ì¡°ë¡œ, ì°¨ê³¡ì°¨ê³¡ ìŒ“ì˜€ë‹¤ê°€ ê°€ì¥ ë§ˆì§€ë§‰ì— ìŒ“ì¸ ê²ƒì´ ê°€ì¥ ë¨¼ì € ë¹ ì ¸ë‚˜ê°€ëŠ” êµ¬ì¡°ì´ë‹¤.

ì½œ ìŠ¤íƒì—ì„  í•¨ìˆ˜ ì»¨í…ìŠ¤íŠ¸ê°€ ì°¨ê³¡ì°¨ê³¡ ìŒ“ì¸ë‹¤.
í•¨ìˆ˜ ì»¨í…ìŠ¤íŠ¸ë€, í•¨ìˆ˜ ì‹¤í–‰ì— í•„ìš”í•œ ëª¨ë“  ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆëŠ” ê°ì²´ë¥¼ ë§í•œë‹¤.

ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œ ì‹¤í–‰ ì¤‘, í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ë©´
V8ì€ í˜¸ì¶œëœ ìˆœì„œëŒ€ë¡œ í•¨ìˆ˜ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì½œ ìŠ¤íƒì— ìŒ“ëŠ”ë‹¤.
ê·¸ë¦¬ê³  í•¨ìˆ˜ ì‹¤í–‰ì´ ì™„ë£Œë˜ë©´, ì™„ë£Œëœ í•¨ìˆ˜ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì½œ ìŠ¤íƒì—ì„œ ì œê±°í•œë‹¤.

#### ì½œ ìŠ¤íƒìœ¼ë¡œ ì¸í•´ ë‚˜íƒ€ë‚˜ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ íŠ¹ì§•

**ìŠ¤íƒ ì˜¤ë²„í”Œë¡œìš°**
ìŠ¤íƒ ì˜¤ë²„í”Œë¡œìš°(stack overflow)ë€ í•œì •ëœ ìŠ¤íƒì— ë°ì´í„°ê°€ ìŒ“ì´ë‹¤ ë„˜ì³ë²„ë¦° ê²½ìš°ë¥¼ ì˜ë¯¸í•œë‹¤.
ì½œ ìŠ¤íƒë„ ê²°êµ­ ìŠ¤íƒ êµ¬ì¡°ì´ê¸° ë•Œë¬¸ì—, ìŠ¤íƒ ì˜¤ë²„ í”Œë¡œìš°ê°€ ë°œìƒë  ìˆ˜ ìˆë‹¤.
ì—„ì²­ë‚˜ê²Œ ê¹Šì€ ë¬´í•œ ì¬ê·€í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê±°ë‚˜, ë§¤ìš° ë§ì´ ì¤‘ì²©ëœ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí–ˆì„ ê²½ìš°ì—
ì½œ ìŠ¤íƒì— ìŠ¤íƒì˜¤ë²„í”Œë¡œìš°ê°€ ë°œìƒë  ìˆ˜ ìˆë‹¤.

**ì‹±ê¸€ ìŠ¤ë ˆë“œ**
ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ì‹±ê¸€ ìŠ¤ë ˆë“œ ì–¸ì–´ì´ë‹¤. 
ì‹±ê¸€ ìŠ¤ë ˆë“œ, ì¦‰, í•œë²ˆì— í•œê°€ì§€ í–‰ë™ë§Œ í•  ìˆ˜ ìˆë‹¤ëŠ” ëœ».
ì‹±ê¸€ ìŠ¤ë ˆë“œë¡œ ë™ì‘í•˜ëŠ” ì´ìœ ëŠ” V8ì—”ì§„ì— ì½œ ìŠ¤íƒì´ í•˜ë‚˜ë°–ì— ì—†ê¸° ë•Œë¬¸ì´ë‹¤.
ì½œ ìŠ¤íƒì´ í•˜ë‚˜ì˜ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•  ë™ì•ˆ ë‹¤ë¥¸ í–‰ë™ì„ í•  ìˆ˜ ì—†ê¸°ë•Œë¬¸ì—
ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ì‹±ê¸€ ìŠ¤ë ˆë“œë¡œ ë™ì‘í•œë‹¤.

## ğŸ’› ì½œë°± íì™€ ì´ë²¤íŠ¸ ë£¨í”„

ì•ì„  ë‚´ìš©ì—ì„œ V8ì—”ì§„ì— ì½œ ìŠ¤íƒ(Call Stack)ì´ í•˜ë‚˜ì´ê¸° ë•Œë¬¸ì—
í•œë²ˆì— í•˜ë‚˜ì˜ ë™ì‘(í•¨ìˆ˜)ë§Œ ìˆ˜í–‰ ê°€ëŠ¥í•˜ì—¬ ìë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹±ê¸€ ìŠ¤ë ˆë“œ ì–¸ì–´ë¼ëŠ” ê²ƒì„ ì´í•´í–ˆë‹¤.

ê·¸ëŸ°ë° ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë”©ì„ í•˜ë‹¤ë³´ë©´,
í•œë²ˆì— í•˜ë‚˜ì˜ ë™ì‘ì„ í•˜ëŠ” ê²ƒì²˜ëŸ¼ ëŠê»´ì§€ì§„ ì•ŠëŠ”ë‹¤.
ì˜ˆë¥¼ ë“¤ë©´ ë¹„ë™ê¸° ì½”ë“œì¸ ê²½ìš°....
í•œ í•¨ìˆ˜ê°€ ìˆ˜í–‰ë  ë™ì•ˆ ë‹¤ìŒ í•¨ìˆ˜ ì½”ë“œë¥¼ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ë°”ë¡œë°”ë¡œ ë™ì‹œì— ìˆ˜í–‰í•´ë²„ë¦¬ì§€ ì•ŠëŠ”ê°€?
ê·¸ë˜ì„œ êµ³ì´ `await`ë¥¼ ê±¸ì–´ì£¼ê¸°ë„ í•˜ê³ ...

ìë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹±ê¸€ ìŠ¤ë ˆë“œë¡œ ë™ì‘í•œë‹¤ëŠ”ê²Œ ë‚©ë“ë˜ì§€ ì•ŠëŠ”ë‹¤.
ì‹±ê¸€ ìŠ¤ë ˆë“œë¼ë©´ ë™ê¸°ì‹ìœ¼ë¡œ ì°¨ë¡€ì°¨ë¡€ ê¸°ë‹¤ë¦¬ë©´ì„œ ë™ì‘ë˜ì–´ì•¼í•˜ëŠ” ê±° ì•„ë‹Œê°€?

ìë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹±ê¸€ ìŠ¤ë ˆë“œì„ì—ë„ ë™ì‹œì„±ì„ ìœ ì§€í•  ìˆ˜ ìˆëŠ” ì´ìœ ëŠ”
**ì½œë°± í**ì™€ **ì´ë²¤íŠ¸ ë£¨í”„** ë•ë¶„ì´ë‹¤.

### ì½œë°± í(Callback Queue)

![í êµ¬ì¡°](https://github.com/doozi316/markdown-repository/blob/master/uploads/queue.jpeg?raw=true)

ì½œë°± íëŠ” V8 ë‚´ë¶€ì— ì¡´ì¬í•˜ëŠ” ê²Œ ì•„ë‹ˆë¼, í˜¸ìŠ¤íŠ¸ í™˜ê²½(ë¸Œë¼ìš°ì €, Node.js ë“±)ì— ì¡´ì¬í•œë‹¤.
ì½œë°± íëŠ” ì½œë°± í•¨ìˆ˜ë¥¼ ê´€ë¦¬í•˜ëŠ” ì˜ì—­ì´ë‹¤.
ì½œë°± íëŠ” FIFO(First In, First Out), ë¨¼ì € ì˜¨ ì½œë°±í•¨ìˆ˜ë¥¼ ë¨¼ì € ì²˜ë¦¬í•˜ëŠ” í˜•íƒœë¡œ ë™ì‘í•œë‹¤.

ğŸ’¡ ì½œë°± í•¨ìˆ˜
ì „ë‹¬ ì¸ìë¡œ ë‹¤ë¥¸ í•¨ìˆ˜ì— ì „ë‹¬ë˜ëŠ” í•¨ìˆ˜.
í•¨ìˆ˜ ì‹¤í–‰ì´ ì™„ë£Œëœ ë’¤ì— ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜.

### ì´ë²¤íŠ¸ ë£¨í”„(Event loop)

ì´ë²¤íŠ¸ ë£¨í”„ëŠ” ì½œ ìŠ¤íƒì´ ë¹„ì–´ ìˆëŠ” ê²½ìš°(ì‹¤í–‰ ì¤‘ì¸ í•¨ìˆ˜ê°€ ì—†ëŠ” ê²½ìš°)
ì½œë°± íì˜ í•¨ìˆ˜ë¥¼ ì½œ ìŠ¤íƒìœ¼ë¡œ ì˜®ê¸°ëŠ” í–‰ìœ„ë¥¼ ì˜ë¯¸í•œë‹¤.
ì½œ ìŠ¤íƒì´ ë¹„ì–´ìˆëŠ”ì§€, ì½œë°± íì— í•¨ìˆ˜ê°€ ìˆëŠ”ì§€ë¥¼ í•­ìƒ ê°ì§€í•˜ê³  ìˆë‹¤.

### Web API

ì½œë°± íì— ì½œë°± í•¨ìˆ˜ê°€ ìŒ“ì´ëŠ” ëŒ€í‘œì ì¸ ì˜ˆë¡œëŠ” Web API ê°€ ìˆë‹¤.
Web API ë€, ë¸Œë¼ìš°ì €ì—ì„œ ì œê³µí•˜ëŠ” API(Application Programming Interface) ë¡œ,
í´ë¦­ ì´ë²¤íŠ¸, HTTP ìš”ì²­, ë˜ëŠ” `setTimeout` ê³¼ ê°™ì€ íŠ¹ì • ì‹œê°„ ì´í›„ì— ì½œë°± í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ê²Œí•˜ëŠ” API ë“¤ì´ ìˆë‹¤.


## ìë°”ìŠ¤í¬ë¦½íŠ¸ ë™ì‘ ê³¼ì •
ì§€ê¸ˆê¹Œì§€ ì•Œì•„ë³¸ ë‚´ìš©ì„ ì¢…í•©í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ì´ë¯¸ì§€ë¡œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆë‹¤.

(v8 ì½œìŠ¤íƒ, í™, ê°€ë¹„ì§€ ì»¬ë ‰í„° + ì½œë°± í, ì´ë²¤íŠ¸ ë£¨í”„ + Web API ì´ë¯¸ì§€)

(ì˜ˆë¥¼ ë“  ì½”ë“œ)

ì˜ˆë¥¼ ë“¤ì–´ ìœ„ ì½”ë“œë¥¼ ì‹¤í–‰í•œë‹¤ë©´, ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ì•„ë˜ì™€ ê°™ì´ ë™ì‘í•  ê²ƒì´ë‹¤. 

(ìˆœì„œì™€ í•¨ê»˜ gif)

1...
2..

# setTimeout(fu, 0)

```
setTimeout(() => {
    ...
}, 0)
```

0ì´ˆ ë’¤ì— ì‹¤í–‰ë˜ëŠ” setTimeout ì½”ë“œë¥¼ ì¢…ì¢… ë³¸ ì  ìˆëŠ”ë°,
êµ³ì´ ì™œ setTimeoutìœ¼ë¡œ ê°ì‹¸ëŠ”ì§€ ì´í•´í•  ìˆ˜ ì—†ì—ˆìœ¼ë‚˜
ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œ ì•Œì•„ë³¸ ë‚´ìš©ìœ¼ë¡œ ì´ë¥¼ ì´í•´í•  ìˆ˜ ìˆë‹¤.

(ì„¤ëª…)

## setTimeout(fn, 0) vs setImmediate vs process.nextTick





# ì¶œì²˜
https://dev.to/bipinrajbhar/how-javascript-works-web-apis-callback-queue-and-event-loop-2p3e
https://cabulous.medium.com/how-browser-works-part-i-process-and-thread-f63a9111bae9
https://medium.com/@keerthikumarsr.95/timers-in-node-js-settimeout-setimmediate-setinterval-process-nexttick-2960bd22fb9a
https://medium.com/dkatalis/eventloop-in-nodejs-settimeout-setimmediate-vs-process-nexttick-37c852c67acb
https://cabulous.medium.com/how-v8-javascript-engine-works-5393832d80a7
https://medium.com/dkatalis/eventloop-in-nodejs-settimeout-setimmediate-vs-process-nexttick-37c852c67acb