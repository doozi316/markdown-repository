## 📢 들어가며

이번 포스팅에선 웹 개발자가 알아야할 C/C++ 관련 지식에 대해 다룬다.

나는 주로 자바스크립트를 다루는 웹 개발자라 C/C++ 을 볼 일이 거의 없는데,
npm 으로 모듈을 주입하다보면 C/C++ 로 개발된 모듈을 종종 볼 수 있다.

이런 모듈들을 네이티브 모듈(Native Module)이라고 부른다.

이 네이티브 모듈을 직접 수정하거나 관리해야할 경우,
C/C++ 을 다루고 빌드까지 할 줄 알아야한다.

이번 포스팅에선
네이티브 모듈이 무엇인지,
자바스크립트와 달리 C/C++ 은 왜 빌드를 해야하는지,
C/C++ 빌드 과정,
그리고 링커 및 공유 라이브러리 등에 대해 알아본다.

## 🌜 네이티브 모듈이란?

네이티브 모듈은 특정 플랫폼에서 동작하도록 **컴파일**된 모듈을 말한다.
웹 뿐만아니라 앱이나 Windows 환경에서 실행가능하도록 특정 언어로 컴파일 된 모듈을 뜻한다.
특정 언어는 예를 들면 C/C++, Rust, Java 등을 의미한다.

방금 얘기했듯이 네이티브 모듈은 C/C++ 외에도 다양한 언어로 작성 및 컴파일 된 모듈을 의미하나,
이번 포스팅에선 C/C++ 에 대해서만 다룬다.

## 🌜 네이티브 모듈은 왜 사용되는가?

1. 크로스 플랫폼 개발
    - 네이티브 모듈은 다른 플랫폼 간의 코드 공유를 허용하며, 특정 플랫폼의 기능과 API를 웹 애플리케이션이나 모바일 앱에서 사용할 수 있게 한다.
    - 나 같은 경우 리눅스 환경에서도, 윈도우 환경에서도 동작 가능한 웹앱을 만들때 네이티브 모듈을 사용했었다.
2. 고성능 기능
    - 웹 기술로는 처리하기 어려운 고성능의 작업, 예를 들어 3D 그래픽 처리나 복잡한 데이터 처리를 수행하기 위해 네이티브 모듈을 사용할 수 있다.
    - 나 같은 경우 웹에서 JDBC/JAVA 를 쓰기 위해 네이티브 모듈을 사용했었다. (node-java)
3. 외부 라이브러리 또는 기존 코드 통합
    - 기존의 C/C++ 코드, 자체 개발한 라이브러리, 또는 외부 라이브러리를 애플리케이션에 통합하기 위해 네이티브 모듈을 사용할 수 있다.
4. 보안 및 액세스 제어
    - 애플리케이션의 보안 측면을 강화하거나 하드웨어 기능에 직접 액세스할 때 네이티브 모듈이 유용하다.

## 🌜 C/C++ 는 왜 컴파일하는 과정이 필요할까?

Javascript 와 달리 C/C++ 은 왜 컴파일하는 과정이 필요할까?
이를 이해하려면 먼저 컴파일에 대해 알아야한다.

### 컴파일이란?

Compile.
컴파일은 우리가 짠 소스 코드(고수준 언어)를 중간 코드 또는 기계어(저수준 언어)로 번역하는 과정을 나타낸다.
이 과정은 주로 **컴파일러**라고 불리는 특수한 프로그램에 의해 수행된다.

여기서 우리가 짠 소스코드, 중간 코드, 기계어는
JAVA 로 예를 들면 각각 아래와 같은 의미이다.

-   우리가 짠 소스코드: `*.java`
-   중간 코드: `*.class`
-   기계어: 0과 1로 이루어진 코드(바이너리 코드)

이에 대해 좀 더 자세히 알고 싶다면 [이 포스팅](https://doozi0316.tistory.com/entry/1%EC%A3%BC%EC%B0%A8-JVM%EC%9D%80-%EB%AC%B4%EC%97%87%EC%9D%B4%EB%A9%B0-%EC%9E%90%EB%B0%94-%EC%BD%94%EB%93%9C%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%8B%A4%ED%96%89%ED%95%98%EB%8A%94-%EA%B2%83%EC%9D%B8%EA%B0%80)을 참고.

컴파일러는 소스 코드의 구문 오류를 확인하고 최적화를 수행하여 실행 파일의 성능을 향상시킨다.
컴파일된 코드는 **실행 파일** 또는 라이브러리 파일의 형태로 저장되며, <u>실행 중에 해석되지 않고 직접 실행된다.</u>

실행 중에 해석되지 않고 직접 실행된다?
이게 무슨 뜻이지?
그럼 실행 중에 해석되는 코드도 있다는 소리일까?
그렇다.
이 개념은 인터프리터 언어, 그리고 컴파일 언어를 의미한다.

### 컴파일 언어란?

위에서 설명한 "컴파일"이라는 단계가 필요한 언어를 의미한다.
컴파일러에 의해 컴파일 되는 언어.
컴파일 단계를 거쳐 **실행 파일**이 생성되고,
이 실행파일은 컴퓨터가 따로 해석 않고 바로 이해 가능하여 빠르게 실행할 수 있다.
대표적인 컴파일러 언어로는,
C, C++, Rust, Go 등이 있다.

### 인터프리터 언어란?

컴파일 단계가 필요 없는 언어이다.
우리가 짠 소스코드를 별다른 컴파일러 없이 바로 실행시킬 수 있다.
때문에 실행파일도 따로 존재하지 않는다.
실행시 컴파일러가 아닌 **인터프리터** 가 소스코드를 한 줄씩 읽고 해석한다.
오류는 인터프리터에 의해 실행 중에 발견되므로 오류를 수정하고 다시 실행해야한다.
실행 때 해석되기 때문에 실행 속도가 컴파일 언어보다 느리다.

대표적인 인터프리터 언어로는,
Python, JavaScript, Ruby, PHP, Perl 등이 있다.

### 빌드란?

Build.
빌드는 소프트웨어 개발 프로세스에서 여러 단계를 거쳐 소스 코드를 <u>실행 가능한 소프트웨어</u>로 만드는 전체 과정을 나타낸다.
빌드는 컴파일 단계를 포함하지만, 더 많은 작업을 수행한다.
예를 들어, 빌드 프로세스에는 소스 코드 컴파일 외에도 의존성 관리, 리소스 복사, 설정 파일 생성, 테스트 수행, 패키징 및 배포 등의 작업이 포함될 수 있다.
빌드는 대개 개발자 또는 빌드 자동화 도구(예: Make, Apache Maven, Gradle, CMake)에 의해 수행된다.
빌드의 목적은 소프트웨어를 배포 가능한 상태로 만들기 위해 필요한 모든 단계를 포함하는 것이다.

빌드는 말 그대로 실행가능한, 배포 가능한 소프트웨어를 만드는 과정이기 때문에,
네이티브 모듈에 국한되어있는 개념이 아니라
모든 프로그래밍에서 필요한 단계이다.

웹 개발자라면 웹팩, 바벨, npm 등으로 빌드를 해본 경험이 있을 것이다.

### 컴파일과 빌드는 무슨 차이?

빌드가 컴파일 단계를 포함하고 있기때문에,
빌드가 좀더 큰 개념이다.
빌드에 컴파일이 포함되어 있다.

컴파일과 빌드, 그리고 인터프리터 언어와 컴파일 언어에 대해 알아보았다.
이로써 우린 C/C++ 은 자바스크립트와 달리 왜 컴파일이라는 과정이 필요한지 알 수 있게 됐다.

요약하면 자바스크립트는 인터프리터 언어이고, C/C++ 언어는 컴파일 언어이기 때문이다.
인터프리터 언어는 컴파일 과정이 필요 없고,
컴파일 언어는 컴파일 과정이 필요하다.

## 🌜 C/C++ 컴파일 - 빌드 과정

https://velog.io/@dhwltnoooh/gcc-%EC%BB%B4%ED%8C%8C%EC%9D%BC%EB%9F%AC

앞서 **컴파일** 은 소스코드를 실행파일로 만드는 과정이라고 했다.

C/C++ 에선 크게 4가지 단계를 거쳐 실행 파일이 생성된다.
전처리 과정 - 컴파일 과정 - 어셈블리 과정 - 링킹 과정

### 1. 전처리 과정



## 🌜 OS 별 빌드 방법

## 🌜 node-gyp를 활용한 네이티브 모듈 빌드 방법
